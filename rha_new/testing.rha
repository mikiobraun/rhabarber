// code for testing
test = fn (name) {
  t = new();
  t.name = name;
  t.failure = 0;
  t.success = 0;
  t.check = fn (cond) if (cond) this.success++ else this.failure++;
  t.summarize = fn () {
    total = this.failure + this.success;
    if (this.failure > 0)
      print("[test]", this.failure, "/", total, "FAILED")
    else
      print("[test]", this.success, "/", total, "PASSED");
  };
  return t;
};

// test (for convenience)
runtest = fn () run(root, "test.rha");
