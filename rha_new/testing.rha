// code for testing
test = macro (x) {
  failure = 0;
  success = 0;
  name = x;
}

check = macro (x) {
  if (eval(local, x))
    success++;
  else {
    print("FAILED:" ,\x);
    failure++;
  }
}

summarize = macro () {
  if (failure > 0)
    print ("[test]", failure, "/", failure+success, "SOME FAILED", name);
  else
    print ("[test]", success, "/", failure+success, "ALL PASSED", name);
}

// test (for convenience)
runtest = fn () run(root, "test.rha");
